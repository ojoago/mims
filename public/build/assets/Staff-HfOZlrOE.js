import{l as m,v as f,d as I,w as D,x as K,o as b,b as l,a,z as B,G as T,c as _,r as F,F as q,A as z,t as d}from"./app-Cnf81uEO.js";import{M as j,f as H}from"./MainLayout-dlTIMVIP.js";import{_ as n,a as i,b as r}from"./TextInput-Cn6tQkRl.js";import{_ as h}from"./BaseSelect-DzfZrRgP.js";import{_ as J}from"./Modal-Y2WNMIea.js";import"./NavLink-CK7BdR7H.js";import"./ApplicationLogo-DKuaMk11.js";const Q={class:"px-4 py-2"},W={class:"px-4 py-2"},X={class:"grid grid-cols-3 gap-4 py-4 px-4 md:py-8 md:px-8 text-sm"},Y={class:"flex flex-col"},Z={class:"flex flex-col"},ee={class:"flex flex-col"},te={class:"flex flex-col"},le={class:"flex flex-col"},se={class:"flex flex-col"},oe={class:"flex flex-col"},ae={class:"flex flex-col"},de={class:"flex flex-col"},re={class:"flex flex-col"},ne=["value"],ie={class:"flex flex-col"},me={class:"flex flex-col"},fe={class:"flex flex-col gap-4 px-4 md:px-8 text-sm"},ue={class:"overflow-auto rounded-lg shadow"},ge={class:"w-full"},ce={class:"bg-gray-50 border-b-2 border-gray-200"},be={width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},pe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},xe={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},he={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ke={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ve={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ye={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Se={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Ne={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Me=["onClick"],Ge={__name:"Staff",setup(Ce){const{transformValidationErrors:A}=H(),p=m(!1),w=()=>{p.value=!1,O()},E=[{id:"Female",text:"Female"},{id:"Male",text:"Male"}],s=m({firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",gsm:"",username:"",state_of_origin:"",lga_of_origin:"",address:"",errors:{}});L();const k=m({});function L(){f.dispatch("loadDropdown","states").then(({data:o})=>{k.value=o}).catch(o=>{console.log(o)})}const V=m({});function y(o){f.dispatch("loadDropdown","state-lga/"+o).then(({data:e})=>{V.value=e}).catch(e=>{console.log(e)})}m({});const S=m({});function $(){f.dispatch("loadDropdown","roles/").then(({data:o})=>{S.value=o}).catch(o=>{console.log(o)})}$();function G(){s.value.errors={};let o={"Content-Type":"multipart/form-data"};f.dispatch("postMethod",{url:"/staff",param:s.value,headers:o}).then(e=>{(e==null?void 0:e.status)==422?s.value.errors=A(e.data):(e==null?void 0:e.status)==201&&(U(),w())}).catch(e=>{console.log(e)})}const O=()=>{s.value={firstname:"",lastname:"",othername:"",file:"",gender:"",religion:"",role:"",dob:"",state_of_origin:"",lga_of_origin:"",state_of_residence:"",lga_of_residence:"",address:"",errors:{}}},P=o=>{var e,v,t,u,g,c;y((e=o==null?void 0:o.origin)==null?void 0:e.id),s.value={firstname:o.firstname,lastname:o.lastname,othername:o.othername,username:o.username,file:"",gender:o.gender,dob:o.dob,gsm:o.gsm,pid:o.user_pid,role:(t=(v=o==null?void 0:o.user)==null?void 0:v.roles[0])==null?void 0:t.name,email:(u=o==null?void 0:o.user)==null?void 0:u.email,state_of_origin:(g=o==null?void 0:o.origin)==null?void 0:g.id,lga_of_origin:(c=o==null?void 0:o.lga)==null?void 0:c.id,address:o.address,errors:{}},p.value=!0},x=m({});function U(o="load-staff"){f.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(x.value=e.data)}).catch(e=>{console.log(e)})}U();const R=o=>{o.target.value.trim()!=""&&f.dispatch("getMethod",{url:"search-staff-list/"+o.target.value}).then(e=>{(e==null?void 0:e.status)==200?x.value=e.data:x.value=[]}).catch(e=>{console.log(e)})};return(o,e)=>{const v=K("font-awesome-icon");return b(),I(j,null,{default:D(()=>[l("div",Q,[a(J,{show:p.value,onClose:w,"max-width":"6xl",title:"Staff Bio Data",onSubmit:G},{default:D(()=>[l("div",W,[l("form",null,[l("div",X,[l("div",Y,[a(n,{for:"first_name",value:"First Name"}),a(i,{id:"first_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.firstname=t),placeholder:"First Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.firstname},null,8,["message"])]),l("div",Z,[a(n,{for:"last_name",value:"Last Name"}),a(i,{id:"last_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.lastname=t),placeholder:"Last Name",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.lastname},null,8,["message"])]),l("div",ee,[a(n,{for:"nin",value:"Othername"}),a(i,{id:"nin",type:"text",class:"mt-1 block w-full",modelValue:s.value.othername,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.othername=t),placeholder:"othername",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.othername},null,8,["message"])]),l("div",te,[a(n,{for:"email",value:"Email address"}),a(i,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.value.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.email=t),placeholder:"Email address",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.email},null,8,["message"])]),l("div",le,[a(n,{for:"email",value:"Username"}),a(i,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:s.value.username,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.username=t),placeholder:"e.g aminu.kudan",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.username},null,8,["message"])]),l("div",se,[a(n,{for:"gsm",value:"Phone Number"}),a(i,{id:"gsm",type:"text",class:"mt-1 block w-full",modelValue:s.value.gsm,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.gsm=t),placeholder:"Phone Number",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.gsm},null,8,["message"])]),l("div",oe,[a(h,{label:"Select Gender",modelValue:s.value.gender,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.gender=t),selected:s.value.gender,options:E},null,8,["modelValue","selected"]),a(r,{class:"mt-2",message:s.value.errors.gender},null,8,["message"])]),l("div",ae,[a(n,{for:"dob",value:"Date of Birth"}),a(i,{id:"dob",type:"date",class:"mt-1 block w-full",modelValue:s.value.dob,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.dob=t),placeholder:"Date of Birth",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:s.value.errors.dob},null,8,["message"])]),l("div",de,[a(n,{for:"image",value:"Image"}),a(i,{id:"image",type:"file",class:"mt-1 block w-full",onInput:e[8]||(e[8]=t=>s.value.file=t.target.files[0]),placeholder:"Date of Birth",required:""}),a(r,{class:"mt-2",message:s.value.errors.file},null,8,["message"])]),l("div",re,[a(n,{for:"dob",value:"State of Origin"}),B(l("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.state_of_origin=t),onChange:e[10]||(e[10]=t=>y(t.target.value)),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[e[15]||(e[15]=l("option",{value:"",selected:""},"Choose State",-1)),(b(!0),_(q,null,F(k.value,t=>(b(),_("option",{key:t.id,value:t.id},d(t.text),9,ne))),128))],544),[[T,s.value.state_of_origin]]),a(r,{class:"mt-2",message:s.value.errors.state_of_origin},null,8,["message"])]),l("div",ie,[a(h,{label:"LGA of Origin",modelValue:s.value.lga_of_origin,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.lga_of_origin=t),selected:s.value.lga_of_origin,options:V.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.lga_of_origin},null,8,["message"])]),l("div",me,[a(h,{label:"Staff Role",modelValue:s.value.role,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.role=t),selected:s.value.role,options:S.value},null,8,["modelValue","selected","options"]),a(r,{class:"mt-2",message:s.value.errors.role},null,8,["message"])])]),l("div",fe,[a(n,{for:"email",value:"Contact Address"}),B(l("textarea",{class:"staffForm-control border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[13]||(e[13]=t=>s.value.address=t),placeholder:"Address"},null,512),[[z,s.value.address]]),a(r,{class:"mt-2",message:s.value.errors.address},null,8,["message"])])])])]),_:1},8,["show"]),l("button",{onClick:e[14]||(e[14]=t=>p.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Staff"),l("div",ue,[l("div",null,[a(i,{id:"longitude",type:"text",class:"mt-1 block w-full",onKeyup:R,placeholder:"enter Staff Name or Phone Number"})]),l("table",ge,[l("thead",ce,[l("tr",null,[e[16]||(e[16]=l("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[17]||(e[17]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Names ",-1)),e[18]||(e[18]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Email",-1)),e[19]||(e[19]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Username",-1)),e[20]||(e[20]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Role",-1)),e[21]||(e[21]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Phone Number",-1)),e[22]||(e[22]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Gender",-1)),e[23]||(e[23]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date Of Birth",-1)),e[24]||(e[24]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"State ",-1)),e[25]||(e[25]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"LGA ",-1)),e[26]||(e[26]=l("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Addrees ",-1)),l("th",be,[a(v,{icon:"fa-solid fas fa-cog"})])])]),l("tbody",null,[(b(!0),_(q,null,F(x.value,(t,u)=>{var g,c,N,M,C;return b(),_("tr",{class:"bg-white",key:u},[l("td",pe,d(u+1),1),l("td",xe,d(t.lastname)+" "+d(t.firstname)+" "+d(t.othername),1),l("td",ve,d((g=t==null?void 0:t.user)==null?void 0:g.email),1),l("td",_e,d(t.username),1),l("td",he,d((N=(c=t==null?void 0:t.user)==null?void 0:c.roles[0])==null?void 0:N.name),1),l("td",we,d(t.gsm),1),l("td",ke,d(t.gender),1),l("td",Ve,d(t.date),1),l("td",ye,d((M=t.origin)==null?void 0:M.state),1),l("td",Se,d((C=t.lga)==null?void 0:C.lga),1),l("td",Ue,d(t.address),1),l("td",Ne,[l("button",{class:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-1 px-3 rounded text-sm",onClick:De=>P(t)}," Edit ",8,Me)])])}),128))])])])])]),_:1})}}};export{Ge as default};
