import{f as L,M as T}from"./MainLayout-C0UmO251.js";import{l as _,x as U,o as d,c as u,a as r,w as S,b as t,z as C,A as M,g as h,F as k,r as A,t as n,v as x,_ as F,u as q,Z as G,n as R}from"./app-Dzc1KR6h.js";import{_ as O}from"./Modal-DTNRKeJ2.js";import{_ as f,b,a as w}from"./TextInput-DZIJ83ft.js";import{_ as P}from"./BaseSelect-D9scMp6n.js";import"./NavLink-DwR3EIqQ.js";import"./ApplicationLogo-YJ-ANCo8.js";const K={action:"",class:"px-4 py-2"},B={key:0},z={class:"overflow-auto rounded-lg shadow"},j={class:"min-w-full"},Z={class:"bg-gray-50 border-b-2 border-gray-200"},H={width:"3%",class:"text-sm font-semibold tracking-wide text-left table-bordered"},J={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},Q={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},W={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},X={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},Y={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ee={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},te={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},se={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},le={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},oe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ne={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ae={class:"p-1 text-sm font-semibold tracking-wide text-left table-bordered"},de=["onClick"],ue={__name:"ComplainTab",setup(D){const{transformValidationErrors:c}=L(),i=_(!1),p=()=>{i.value=!1},a=[{id:"PENDING",text:"PENDING"},{id:"RESOLVED",text:"RESOLVED"},{id:"UNRESOLVED",text:"UNRESOLVED"},{id:"REPLACED",text:"REPLACED"}],m=_({});function y(o="installed-list"){x.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})}y();const E=o=>{x.dispatch("getMethod",{url:"search-installed-list/"+o.target.value}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})},l=_({meter_number:"",meter_pid:"",complain:"",status:"",resolution:"",new_meter_number:"",new_seal:"",errors:[]}),N=o=>{l.value.meter_number=o.meter_number,l.value.meter_pid=o.pid,i.value=!0},V=()=>{l.value.errors={},x.dispatch("postMethod",{url:"/add-customer-complain",param:l.value}).then(o=>{(o==null?void 0:o.status)==422?l.value.errors=c(o.data):(o==null?void 0:o.status)==201&&p()}).catch(o=>{console.log(o)})};return(o,e)=>{const $=U("font-awesome-icon");return d(),u(k,null,[r(O,{show:i.value,"max-width":"sm",onClose:p,title:"Add Complains ",onSubmit:V},{default:S(()=>[t("form",K,[t("div",null,[r(f,{for:"complain",value:"Customer Complain"}),C(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.complain=s),placeholder:"Enter Complain"},null,512),[[M,l.value.complain]]),r(b,{class:"mt-2",message:l.value.errors.complain},null,8,["message"])]),t("div",null,[r(f,{for:"complain",value:" Resolution"}),C(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.resolution=s),placeholder:"Enter resolution"},null,512),[[M,l.value.resolution]]),r(b,{class:"mt-2",message:l.value.errors.complain},null,8,["message"])]),t("div",null,[r(P,{modelValue:l.value.status,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.status=s),label:"Status",selected:l.value.status,options:a},null,8,["modelValue","selected"]),r(b,{class:"mt-2",message:l.value.errors.status},null,8,["message"])]),l.value.status=="replaced"?(d(),u("div",B,[t("div",null,[r(f,{for:"new_meter_number",value:"New Meter Number"}),r(w,{id:"new_meter_number",type:"number",class:"mt-1 block w-full",modelValue:l.value.new_meter_number,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.new_meter_number=s),required:"",placeholder:"Enter new Meter Number"},null,8,["modelValue"]),r(b,{class:"mt-2",message:l.value.errors.new_meter_number},null,8,["message"])]),t("div",null,[r(f,{for:"new_seal",value:"New Seal"}),r(w,{id:"new_seal",type:"number",class:"mt-1 block w-full",modelValue:l.value.new_seal,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.new_seal=s),required:"",placeholder:"Enter New Seal"},null,8,["modelValue"]),r(b,{class:"mt-2",message:l.value.errors.new_seal},null,8,["message"])])])):h("",!0)])]),_:1},8,["show"]),t("div",z,[t("div",null,[r(w,{id:"longitude",type:"text",class:"mt-1 block w-full",onKeyup:E,placeholder:"enter account number or name"})]),t("table",j,[t("thead",Z,[t("tr",null,[e[5]||(e[5]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[6]||(e[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Account Number",-1)),e[7]||(e[7]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Account Name",-1)),e[8]||(e[8]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Address",-1)),e[9]||(e[9]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"11kv Feeder",-1)),e[10]||(e[10]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"DT Name",-1)),e[11]||(e[11]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Type",-1)),e[12]||(e[12]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Number",-1)),e[13]||(e[13]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Seal",-1)),e[14]||(e[14]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Latitude",-1)),e[15]||(e[15]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Longitude",-1)),e[16]||(e[16]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"}," Date ",-1)),t("th",H,[r($,{icon:"fa-solid fas fa-cog"})])])]),t("tbody",null,[(d(!0),u(k,null,A(m.value,(s,g)=>{var v;return d(),u("tr",{class:"bg-white",key:g},[t("td",J,n(g+1),1),t("td",Q,n(s==null?void 0:s.account_no),1),t("td",W,n(s==null?void 0:s.fullname),1),t("td",X,n(s==null?void 0:s.address),1),t("td",Y,n((v=s==null?void 0:s.feeder11kv)==null?void 0:v.name),1),t("td",ee,n(s==null?void 0:s.dt_name),1),t("td",te,n(s==null?void 0:s.meter_type),1),t("td",se,n(s==null?void 0:s.meter_number),1),t("td",le,n(s==null?void 0:s.seal),1),t("td",oe,n(s==null?void 0:s.x_cordinate),1),t("td",re,n(s==null?void 0:s.y_cordinate),1),t("td",ne,n(s.date),1),t("td",ae,[t("button",{class:"bg-optimal text-white px-4 py-1 rounded mr-2",onClick:I=>N(s)},"Mark",8,de)])])}),128))])])])],64)}}},ie={class:"overflow-auto rounded-lg shadow"},me={class:"min-w-full"},ce={class:"bg-gray-50 border-b-2 border-gray-200"},be={width:"3%",class:"text-sm font-semibold tracking-wide text-left table-bordered"},pe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},fe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},_e={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},xe={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},we={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ge={class:"p-2 text-sm font-semibold tracking-wide text-left table-bordered"},ve={class:"p-1 text-sm font-semibold tracking-wide text-left table-bordered"},he=["onClick"],ke={action:"",class:"px-4 py-2"},ye={key:0},Ee={__name:"ReplacementTab",setup(D){const{transformValidationErrors:c}=L(),i=_(!1),p=()=>{i.value=!1},a=[{id:"PENDING",text:"PENDING"},{id:"RESOLVED",text:"RESOLVED"},{id:"UNRESOLVED",text:"UNRESOLVED"},{id:"REPLACED",text:"REPLACED"}],m=_({});function y(o="complain-list"){x.dispatch("getMethod",{url:o}).then(e=>{(e==null?void 0:e.status)==200&&(m.value=e.data)}).catch(e=>{console.log(e)})}y();const E=o=>{o.target.value.trim()!=""&&x.dispatch("getMethod",{url:"search-complain-list/"+o.target.value}).then(e=>{(e==null?void 0:e.status)==200?m.value=e.data:m.value=[]}).catch(e=>{console.log(e)})},l=_({meter_number:"",meter_pid:"",complain:"",status:"",resolution:"",new_meter_number:"",new_seal:"",errors:[]}),N=o=>{l.value.meter_number=o.meter_number,l.value.meter_pid=o.pid,l.value.complain=o.complain,l.value.status=o.status,i.value=!0},V=()=>{l.value.errors={},x.dispatch("postMethod",{url:"/add-customer-complain",param:l.value}).then(o=>{(o==null?void 0:o.status)==422?l.value.errors=c(o.data):(o==null?void 0:o.status)==201&&p()}).catch(o=>{console.log(o)})};return(o,e)=>{const $=U("font-awesome-icon");return d(),u("div",null,[t("div",ie,[t("div",null,[r(w,{id:"longitude",type:"text",class:"mt-1 block w-full",onKeyup:E,placeholder:"enter account number or name"})]),t("table",me,[t("thead",ce,[t("tr",null,[e[4]||(e[4]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),e[5]||(e[5]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Meter Number",-1)),e[6]||(e[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Complain ",-1)),e[7]||(e[7]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Resolution",-1)),e[8]||(e[8]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),e[9]||(e[9]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"New Meter Number",-1)),t("th",be,[r($,{icon:"fa-solid fas fa-cog"})])])]),t("tbody",null,[(d(!0),u(k,null,A(m.value.data,(s,g)=>{var v;return d(),u("tr",{class:"bg-white",key:g},[t("td",pe,n(g+1),1),t("td",fe,n((v=s==null?void 0:s.meter)==null?void 0:v.meter_number),1),t("td",_e,n(s==null?void 0:s.complain),1),t("td",xe,n(s==null?void 0:s.resolution),1),t("td",we,n(s==null?void 0:s.status),1),t("td",ge,n(s==null?void 0:s.new_meter_number),1),t("td",ve,[t("button",{class:"bg-optimal text-white px-4 py-1 rounded mr-2",onClick:I=>N(s)},"Update",8,he)])])}),128))])])]),r(O,{show:i.value,"max-width":"sm",onClose:p,title:"Add Complains ",onSubmit:V},{default:S(()=>[t("form",ke,[t("div",null,[r(f,{for:"complain",value:" Resolution"}),C(t("textarea",{class:"w-full border-gray-300 focus:border-optimal focus:ring-optimal rounded-md shadow-sm","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.resolution=s),placeholder:"Enter resolution"},null,512),[[M,l.value.resolution]]),r(b,{class:"mt-2",message:l.value.errors.complain},null,8,["message"])]),t("div",null,[r(P,{modelValue:l.value.status,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.status=s),label:"Status",selected:l.value.status,options:a},null,8,["modelValue","selected"]),r(b,{class:"mt-2",message:l.value.errors.status},null,8,["message"])]),l.value.status=="replaced"?(d(),u("div",ye,[t("div",null,[r(f,{for:"new_meter_number",value:"New Meter Number"}),r(w,{id:"new_meter_number",type:"number",class:"mt-1 block w-full",modelValue:l.value.new_meter_number,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.new_meter_number=s),required:"",placeholder:"Enter new Meter Number"},null,8,["modelValue"]),r(b,{class:"mt-2",message:l.value.errors.new_meter_number},null,8,["message"])]),t("div",null,[r(f,{for:"new_seal",value:"New Seal"}),r(w,{id:"new_seal",type:"number",class:"mt-1 block w-full",modelValue:l.value.new_seal,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.new_seal=s),required:"",placeholder:"Enter New Seal"},null,8,["modelValue"]),r(b,{class:"mt-2",message:l.value.errors.new_seal},null,8,["message"])])])):h("",!0)])]),_:1},8,["show"])])}}},Ne={class:"container mx-auto"},Ve={class:"m-4 pb-4 border bg-gray-100 rounded-lg"},$e={class:"text-sm flex justify-center bg-gray-200"},Ce={class:"p-3 bg-gra-200"},Me={key:0},Se={class:"border border-gray-300 rounded-lg p-4"},De={key:1},Re={class:"border border-gray-300 rounded-lg p-4"},Le={__name:"Complains",setup(D){const c=_(1),i=p=>c.value=p;return(p,a)=>(d(),u(k,null,[r(q(G),{title:"Customer's Complains"}),r(T,null,{default:S(()=>[t("div",Ne,[t("fieldset",Ve,[t("nav",$e,[t("a",{onClick:a[0]||(a[0]=m=>i(1)),class:R(["inline-block px-4 py-2 cursor-pointer",c.value===1&&"active"])},"Complains",2),t("a",{onClick:a[1]||(a[1]=m=>i(2)),class:R(["inline-block px-4 py-2 cursor-pointer",c.value===2&&"active"])},"Replacement",2)]),t("div",Ce,[c.value===1?(d(),u("div",Me,[t("fieldset",Se,[a[2]||(a[2]=t("legend",{class:"text-lg font-medium text-left px-2"},"Complains",-1)),r(ue)])])):h("",!0),c.value===2?(d(),u("div",De,[t("fieldset",Re,[a[3]||(a[3]=t("legend",{class:"text-lg font-medium text-left px-2"},"Replacement",-1)),r(Ee)])])):h("",!0)])])])]),_:1})],64))}},qe=F(Le,[["__scopeId","data-v-597289f6"]]);export{qe as default};
